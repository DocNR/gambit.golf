package main

templ landingPageTemplate() {
	<!DOCTYPE html>
	<html lang="en" class="theme--dark">
		<head>
			<meta charset="UTF-8"/>
			<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
			<title>Gambit Golf — Proof of Play</title>
			<meta name="description" content="On-course scoring. Real money on the line. Your data, yours forever. No company in the middle."/>
			<meta name="theme-color" content="#10b981"/>
			<link rel="apple-touch-icon" sizes="180x180" href="/njump/static/favicon/raid/apple-touch-icon.png?v=5"/>
			<link rel="icon" type="image/png" sizes="32x32" href="/njump/static/favicon/raid/favicon-32x32.png?v=5"/>
			<link rel="icon" type="image/png" sizes="16x16" href="/njump/static/favicon/raid/favicon-16x16.png?v=5"/>
			<link rel="shortcut icon" href="/njump/static/favicon/raid/favicon.ico?v=5"/>
			<link rel="preconnect" href="https://fonts.googleapis.com"/>
			<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/>
			<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400&display=swap"/>
			if tailwindDebugStuff != "" {
				@templ.Raw(tailwindDebugStuff)
			} else {
				<link rel="stylesheet" type="text/css" href={ "/njump/static/tailwind-bundle.min.css?t=" + compileTimeTs }/>
			}
			<style>
				@keyframes scatter-in {
					from { opacity: 0; transform: scale(0.3); }
					to   { opacity: 1; transform: scale(1); }
				}
				.dot-animate { animation: scatter-in 0.6s ease-out both; animation-play-state: paused; }
				.dot-animate.triggered { animation-play-state: running; }
				h1, h2, .font-mono-brand {
					font-family: 'Space Mono', monospace;
					text-transform: uppercase;
					letter-spacing: 0.04em;
				}
				h3 {
					font-family: 'Space Mono', monospace;
					letter-spacing: -0.01em;
				}
			</style>
			<!-- Capture real NIP-07 extension before window.nostr.js can override it -->
			<script>window._nip07 = window.nostr || null;</script>
			<!-- NIP-46 remote signer support (window.nostr.js) — fallback for users without an extension -->
			<script>
				window.wnjParams = {
					accent: 'green',
					compactMode: true,
					nostrConnectRelays: [
						'wss://relay.nsec.app',
						'wss://nos.lol',
						'wss://relay.primal.net'
					],
					appMetadata: {
						name: 'Gambit Golf',
						url: 'https://gambit.golf',
						image: 'https://gambit.golf/njump/static/logo-icon.png'
					}
				}
			</script>
			<script src="https://cdn.jsdelivr.net/npm/window.nostr.js/dist/window.nostr.min.js"></script>
			<script src="https://cdn.jsdelivr.net/npm/@formstr/sdk@0/dist/formstr.bundle.js" defer></script>
		</head>
		<body class="bg-gray-950 text-gray-100 font-sans antialiased">
			<!-- HERO -->
			<section class="relative min-h-screen flex items-center overflow-hidden">
				<div class="mx-auto w-full max-w-6xl px-6 py-24 flex flex-col lg:flex-row items-center gap-16">
					<!-- Copy -->
					<div class="flex-1 max-w-xl">
						<p class="uppercase tracking-widest text-sm text-emerald-400 font-semibold mb-6">Proof of Play.</p>
						<h1 class="text-4xl sm:text-5xl md:text-6xl font-extrabold leading-tight mb-6">
							The open standard<br/>
							{ "for" } <span class="text-emerald-400">golf.</span>
						</h1>
						<p class="text-lg text-gray-400 mb-10 max-w-md">
							On-course scoring. Real money on the line. Your data, yours forever. No company in the middle.
						</p>
						<a
							href="#waitlist"
							class="inline-block bg-emerald-500 hover:bg-emerald-400 text-gray-950 font-bold px-8 py-3 rounded-lg text-lg transition-colors"
						>
							Get Early Access
						</a>
					</div>
					<!-- Shot-dispersion SVG -->
					<div class="flex-1 flex justify-center w-full max-w-md">
						<svg viewBox="0 0 300 300" class="w-full max-w-sm" aria-label="Shot dispersion scatter plot">
							<!-- Faint grid -->
							<line x1="150" y1="0" x2="150" y2="300" stroke="#1f2937" stroke-width="0.5"/>
							<line x1="0" y1="150" x2="300" y2="150" stroke="#1f2937" stroke-width="0.5"/>
							<circle cx="150" cy="150" r="40" fill="none" stroke="#1f2937" stroke-width="0.5"/>
							<circle cx="150" cy="150" r="80" fill="none" stroke="#1f2937" stroke-width="0.5"/>
							<circle cx="150" cy="150" r="120" fill="none" stroke="#1f2937" stroke-width="0.5"/>
							<!-- Target center -->
							<circle cx="150" cy="150" r="3" fill="#34d399" opacity="0.4"/>
							<!-- Green dots (good shots, near center) -->
							<circle cx="155" cy="143" r="3.5" fill="#34d399" class="dot-animate" style="animation-delay:0.1s"/>
							<circle cx="142" cy="155" r="3" fill="#34d399" class="dot-animate" style="animation-delay:0.15s"/>
							<circle cx="160" cy="148" r="3" fill="#34d399" class="dot-animate" style="animation-delay:0.2s"/>
							<circle cx="148" cy="138" r="3.5" fill="#34d399" class="dot-animate" style="animation-delay:0.25s"/>
							<circle cx="153" cy="162" r="3" fill="#34d399" class="dot-animate" style="animation-delay:0.3s"/>
							<circle cx="138" cy="145" r="3" fill="#34d399" class="dot-animate" style="animation-delay:0.35s"/>
							<circle cx="162" cy="155" r="3.5" fill="#34d399" class="dot-animate" style="animation-delay:0.4s"/>
							<circle cx="145" cy="160" r="3" fill="#34d399" class="dot-animate" style="animation-delay:0.45s"/>
							<circle cx="157" cy="135" r="3" fill="#34d399" class="dot-animate" style="animation-delay:0.5s"/>
							<circle cx="140" cy="150" r="3.5" fill="#34d399" class="dot-animate" style="animation-delay:0.55s"/>
							<circle cx="150" cy="142" r="3" fill="#34d399" class="dot-animate" style="animation-delay:0.6s"/>
							<circle cx="165" cy="160" r="3" fill="#34d399" class="dot-animate" style="animation-delay:0.65s"/>
							<!-- White dots (scattered wider) -->
							<circle cx="175" cy="125" r="2.5" fill="#e5e7eb" class="dot-animate" style="animation-delay:0.3s"/>
							<circle cx="120" cy="170" r="2.5" fill="#e5e7eb" class="dot-animate" style="animation-delay:0.35s"/>
							<circle cx="185" cy="165" r="2" fill="#e5e7eb" class="dot-animate" style="animation-delay:0.4s"/>
							<circle cx="130" cy="120" r="2.5" fill="#e5e7eb" class="dot-animate" style="animation-delay:0.45s"/>
							<circle cx="170" cy="180" r="2" fill="#e5e7eb" class="dot-animate" style="animation-delay:0.5s"/>
							<circle cx="115" cy="140" r="2.5" fill="#e5e7eb" class="dot-animate" style="animation-delay:0.55s"/>
							<circle cx="180" cy="130" r="2" fill="#e5e7eb" class="dot-animate" style="animation-delay:0.6s"/>
							<circle cx="125" cy="175" r="2.5" fill="#e5e7eb" class="dot-animate" style="animation-delay:0.65s"/>
							<circle cx="190" cy="145" r="2" fill="#e5e7eb" class="dot-animate" style="animation-delay:0.7s"/>
							<circle cx="110" cy="155" r="2.5" fill="#e5e7eb" class="dot-animate" style="animation-delay:0.75s"/>
							<!-- Outliers -->
							<circle cx="200" cy="100" r="2" fill="#e5e7eb" opacity="0.5" class="dot-animate" style="animation-delay:0.8s"/>
							<circle cx="95" cy="195" r="2" fill="#e5e7eb" opacity="0.5" class="dot-animate" style="animation-delay:0.85s"/>
							<circle cx="210" cy="175" r="1.5" fill="#e5e7eb" opacity="0.4" class="dot-animate" style="animation-delay:0.9s"/>
							<circle cx="85" cy="115" r="1.5" fill="#e5e7eb" opacity="0.4" class="dot-animate" style="animation-delay:0.95s"/>
						</svg>
					</div>
				</div>
			</section>
			<!-- THREE PILLARS -->
			<section class="py-24 px-6">
				<div class="mx-auto max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-8">
					<!-- Pillar 1: Scoring -->
					<div class="bg-gray-900 border border-gray-800 rounded-2xl p-8 flex flex-col items-start">
						<!-- Grid SVG -->
						<svg viewBox="0 0 48 48" class="w-12 h-12 mb-6" aria-hidden="true">
							<rect x="4" y="4" width="12" height="12" rx="2" fill="none" stroke="#34d399" stroke-width="1.5"/>
							<rect x="18" y="4" width="12" height="12" rx="2" fill="none" stroke="#34d399" stroke-width="1.5"/>
							<rect x="32" y="4" width="12" height="12" rx="2" fill="none" stroke="#34d399" stroke-width="1.5"/>
							<rect x="4" y="18" width="12" height="12" rx="2" fill="none" stroke="#34d399" stroke-width="1.5"/>
							<rect x="18" y="18" width="12" height="12" rx="2" fill="#34d399" opacity="0.3" stroke="#34d399" stroke-width="1.5"/>
							<rect x="32" y="18" width="12" height="12" rx="2" fill="none" stroke="#34d399" stroke-width="1.5"/>
							<rect x="4" y="32" width="12" height="12" rx="2" fill="none" stroke="#34d399" stroke-width="1.5"/>
							<rect x="18" y="32" width="12" height="12" rx="2" fill="none" stroke="#34d399" stroke-width="1.5"/>
							<rect x="32" y="32" width="12" height="12" rx="2" fill="none" stroke="#34d399" stroke-width="1.5"/>
						</svg>
						<h3 class="text-xl font-bold mb-3">Scoring That Keeps Up</h3>
						<p class="text-gray-400 leading-relaxed">
							Live multiplayer scoring across devices. See every shot as it happens.
						</p>
					</div>
					<!-- Pillar 2: Settle -->
					<div class="bg-gray-900 border border-gray-800 rounded-2xl p-8 flex flex-col items-start">
						<!-- Lightning bolt SVG -->
						<svg viewBox="0 0 48 48" class="w-12 h-12 mb-6" aria-hidden="true">
							<polygon points="28,2 12,26 22,26 18,46 36,20 26,20" fill="none" stroke="#34d399" stroke-width="1.5" stroke-linejoin="round"/>
						</svg>
						<h3 class="text-xl font-bold mb-3">Settle on the Spot</h3>
						<p class="text-gray-400 leading-relaxed">
							Side games with Lightning payments. The hole closes, the zap lands. Before you can put the pin back in the cup.
						</p>
					</div>
				</div>
			</section>
			<!-- OPEN STANDARD SECTION -->
			<section class="py-24 px-6 border-t border-gray-800">
				<div class="mx-auto max-w-3xl">
					<h2 class="text-3xl sm:text-4xl font-extrabold mb-10">The open standard for golf.</h2>
					<div class="space-y-3 text-xl text-gray-300 font-medium">
						<p>Every round, signed.</p>
						<p>Every stat, yours.</p>
						<p>No platform owns it.</p>
						<p>No company can take it away.</p>
					</div>
				</div>
			</section>
			<!-- PROTOCOL SECTION -->
			<section class="py-24 px-6">
				<div class="mx-auto max-w-3xl text-center">
					<h2 class="text-3xl sm:text-4xl font-extrabold mb-8">Your game. Your data. No platform owns it.</h2>
					<p class="text-lg text-gray-400 leading-relaxed mb-6">
						Gambit is built on Nostr — an open protocol with no company in the middle. Your rounds, your stats, your social graph. Signed with your keys, verifiable by anyone, portable forever.
					</p>
					<p class="text-lg text-gray-400 leading-relaxed mb-8">
						We are not building a platform. We are building a tool.
					</p>
					<p class="text-xl italic text-emerald-400 font-semibold">Golf. Signed. Verified.</p>
					<div class="mt-10 pt-8 border-t border-gray-800 text-sm text-gray-500">
						New to Nostr?
						<a href="https://nstart.me/en" target="_blank" rel="noopener noreferrer" class="text-emerald-400 hover:text-emerald-300 transition-colors ml-1">Get your keys</a>
						<span class="mx-2">·</span>
						<a href="https://njump.me" target="_blank" rel="noopener noreferrer" class="text-emerald-400 hover:text-emerald-300 transition-colors">Explore Nostr</a>
					</div>
				</div>
			</section>
			<!-- EARLY ACCESS -->
			<section id="waitlist" class="py-24 px-6 border-t border-gray-800">
				<div class="mx-auto max-w-xl text-center">
					<h2 class="text-3xl sm:text-4xl font-extrabold mb-4">Get iOS TestFlight Access</h2>
					<p class="text-lg text-gray-400 mb-10">Launching at Bitcoin Conference Las Vegas — April 2026. Limited spots.</p>
						<form id="waitlist-form" class="flex flex-col gap-4 text-left" onsubmit="submitWaitlist(event)">
						<!-- Nostr path -->
						<div>
							<button
								type="button"
								id="nostr-connect-btn"
								onclick="connectNostr()"
								class="w-full flex items-center justify-center gap-2 bg-gray-800 hover:bg-gray-700 border border-gray-700 hover:border-emerald-500 text-gray-300 hover:text-emerald-400 font-semibold px-4 py-3 rounded-lg transition-colors"
							>
								<svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"/><line x1="2" y1="12" x2="22" y2="12"/></svg>
								<span id="nostr-btn-text">Connect with Nostr</span>
							</button>
							<input type="hidden" id="npub-input"/>
						</div>
						<!-- Divider -->
						<div class="flex items-center gap-3">
							<div class="flex-1 border-t border-gray-800"></div>
							<span class="text-sm text-gray-600">or</span>
							<div class="flex-1 border-t border-gray-800"></div>
						</div>
						<!-- Email path -->
						<div>
							<input
								type="email"
								id="email-input"
								placeholder="your@email.com"
								class="w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-emerald-500"
							/>
						</div>
						<!-- Comments -->
						<div>
							<textarea
								id="comments-input"
								placeholder="Anything else? (handicap, what you want to see, how you found us)"
								rows="3"
								class="w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-emerald-500 resize-none"
							></textarea>
						</div>
						<p id="waitlist-error" class="text-red-400 text-sm hidden">Please connect with Nostr or enter an email address.</p>
						<button
							id="submit-btn"
							type="submit"
							class="w-full bg-emerald-500 hover:bg-emerald-400 text-gray-950 font-bold px-8 py-3 rounded-lg text-lg transition-colors"
						>
							Request TestFlight Access
						</button>
					</form>
					<!-- Success state -->
					<div id="waitlist-success" class="hidden text-center py-8">
						<div class="text-4xl mb-4">⛳</div>
						<h3 class="text-xl font-bold text-emerald-400 mb-2">You're on the list.</h3>
						<p class="text-gray-400">We'll be in touch before launch.</p>
					</div>
					<p class="mt-8 text-sm text-gray-600">
						Or find us on Nostr —
						<a
							href="https://primal.net/p/npub1eaglew60uyhrzq4v437fyvh8ry0k9hy600699qrgscdxr9hq5n5s9xlryx"
							target="_blank"
							rel="noopener noreferrer"
							class="text-emerald-400 hover:text-emerald-300 transition-colors"
						>{ "@" }Gambit Golf</a>
					</p>
				</div>
			</section>
			<!-- FOOTER -->
			<footer class="py-12 px-6 border-t border-gray-800">
				<div class="mx-auto max-w-6xl flex flex-col sm:flex-row items-center justify-between gap-6">
					<img src="/njump/static/logo-compact.png" alt="Gambit Golf" class="h-10 w-auto opacity-90 hover:opacity-100 transition-opacity"/>
					<div class="flex items-center gap-6">
						<a href="https://github.com/DocNR/gambit.golf" target="_blank" rel="noopener noreferrer" class="text-gray-500 hover:text-gray-300 transition-colors">
							<!-- GitHub icon -->
							<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
								<path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"/>
							</svg>
						</a>
						<a href="https://primal.net/p/npub1eaglew60uyhrzq4v437fyvh8ry0k9hy600699qrgscdxr9hq5n5s9xlryx" target="_blank" rel="noopener noreferrer" class="text-gray-500 hover:text-gray-300 transition-colors">
							<!-- Nostr / relay icon -->
							<svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true">
								<circle cx="12" cy="12" r="10"/>
								<path d="M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"/>
								<line x1="2" y1="12" x2="22" y2="12"/>
							</svg>
						</a>
					</div>
				</div>
			</footer>
		<script>
			document.addEventListener('DOMContentLoaded', function() {
				prefetchForm();
				var svg = document.querySelector('[aria-label="Shot dispersion scatter plot"]');
				if (!svg) return;
				var observer = new IntersectionObserver(function(entries) {
					entries.forEach(function(entry) {
						if (entry.isIntersecting) {
							entry.target.querySelectorAll('.dot-animate').forEach(function(d) {
								d.classList.add('triggered');
							});
							observer.unobserve(entry.target);
						}
					});
				}, { threshold: 0.4 });
				observer.observe(svg);
			});

			// --- Nostr connect ---
			var _bech32Charset = 'qpzry9x8gf2tvdw0s3jn54khce6mua7l';
			function _bech32Polymod(v) {
				var c = 1, GEN = [0x3b6a57b2,0x26508e6d,0x1ea119fa,0x3d4233dd,0x2a1462b3];
				for (var i = 0; i < v.length; i++) { var b = c >> 25; c = (c & 0x1ffffff) << 5 ^ v[i]; for (var j = 0; j < 5; j++) if ((b >> j) & 1) c ^= GEN[j]; }
				return c;
			}
			function _bech32HrpExpand(hrp) {
				var r = []; for (var i = 0; i < hrp.length; i++) r.push(hrp.charCodeAt(i) >> 5);
				r.push(0); for (var i = 0; i < hrp.length; i++) r.push(hrp.charCodeAt(i) & 31); return r;
			}
			function _bech32CreateChecksum(hrp, data) {
				var values = _bech32HrpExpand(hrp).concat(data).concat([0,0,0,0,0,0]);
				var mod = _bech32Polymod(values) ^ 1;
				var ret = []; for (var i = 0; i < 6; i++) ret.push((mod >> (5 * (5 - i))) & 31); return ret;
			}
			function _convertBits(data, from, to) {
				var acc = 0, bits = 0, result = [];
				for (var i = 0; i < data.length; i++) { acc = (acc << from) | data[i]; bits += from; while (bits >= to) { bits -= to; result.push((acc >> bits) & ((1 << to) - 1)); } }
				if (bits > 0) result.push((acc << (to - bits)) & ((1 << to) - 1));
				return result;
			}
			function hexToNpub(hex) {
				var bytes = []; for (var i = 0; i < hex.length; i += 2) bytes.push(parseInt(hex.slice(i, i+2), 16));
				var words = _convertBits(bytes, 8, 5);
				var combined = words.concat(_bech32CreateChecksum('npub', words));
				return 'npub1' + combined.map(function(v) { return _bech32Charset[v]; }).join('');
			}

			async function connectNostr() {
				var btn = document.getElementById('nostr-connect-btn');
				var btnText = document.getElementById('nostr-btn-text');
				var npubInput = document.getElementById('npub-input');
				// Prefer the real NIP-07 extension captured before window.nostr.js loaded
				var signer = window._nip07 || window.nostr;
				if (!signer) {
					btnText.textContent = 'No extension found — install Alby or nos2x';
					setTimeout(function() { btnText.textContent = 'Connect with Nostr'; }, 3000);
					return;
				}
				try {
					btnText.textContent = 'Connecting...';
					btn.disabled = true;
					var pubkey = await signer.getPublicKey();
					var npub = hexToNpub(pubkey);
					npubInput.value = npub;
					btn.classList.remove('bg-gray-800','hover:bg-gray-700','border-gray-700','hover:border-emerald-500','text-gray-300','hover:text-emerald-400');
					btn.classList.add('bg-emerald-900/30','border-emerald-700','text-emerald-400','cursor-default');
					btnText.textContent = '✓ ' + npub.slice(0,10) + '...' + npub.slice(-5);
				} catch(e) {
					btn.disabled = false;
					btnText.textContent = 'Cancelled — try again';
					setTimeout(function() { btnText.textContent = 'Connect with Nostr'; }, 2000);
				}
			}

			// --- Formstr / Nostr submit ---
			var FORMSTR_NADDR = 'naddr1qvzqqqr4mqpzpeqyy9vkmyxxcj05qqhjt9udxehdf4jxgu8rf0nxrn0v7e8z682uqy2hwumn8ghj7un9d3shjtnyv9kh2uewd9hj7qghwaehxw309aex2mrp0yh8qunfd4skctnwv46z7qgdwaehxw309ahx7uewd3hkcqg7waehxw309aex2mrp0yhxummnw3ezuamfwfjkgmn9wshx5up0qyw8wumn8ghj7mn0wd68ytfsxyh8jcttd95x7mnwv5hxxmmdqyv8wumn8ghj7un9d3shjtnndehhyapwwdhkx6tpdsq3vamnwvaz7tmjv4kxz7fwdehhxarj9e3xzmnyqyghwumn8ghj7mn0wd68yv339e3k7mgqqej4xvnfd45spe7dc6';
			var FORMSTR_VIEW_KEY = '39b9ed33946c2231c98d70a2e16ca41e5a1d008734ed06b4252535249ad8bccc';
			var FIELD_EMAIL = 'template_field_1772025499985_0';
			var FIELD_NPUB  = 'template_field_1772025499985_1';
			var FIELD_COMMENTS = 'template_field_1772025499985_4';
			var _cachedForm = null;

			async function prefetchForm() {
				try {
					if (typeof FormstrSDK === 'undefined') return;
					var sdk = new FormstrSDK.FormstrSDK();
					_cachedForm = await sdk.fetchFormWithViewKey(FORMSTR_NADDR, FORMSTR_VIEW_KEY);
				} catch(e) { console.warn('Formstr prefetch:', e.message); }
			}

			async function submitWaitlist(e) {
				e.preventDefault();
				var npub = document.getElementById('npub-input').value.trim();
				var email = document.getElementById('email-input').value.trim();
				var comments = document.getElementById('comments-input').value.trim();
				var err = document.getElementById('waitlist-error');
				if (!npub && !email) { err.classList.remove('hidden'); return; }
				err.classList.add('hidden');
				var btn = document.getElementById('submit-btn');
				btn.textContent = 'Submitting...';
				btn.disabled = true;
				try {
					var sdk = new FormstrSDK.FormstrSDK();
					var form = _cachedForm || await sdk.fetchFormWithViewKey(FORMSTR_NADDR, FORMSTR_VIEW_KEY);
					var values = {};
					if (email) values[FIELD_EMAIL] = email;
					if (npub) values[FIELD_NPUB] = npub;
					if (comments) values[FIELD_COMMENTS] = comments;
					await sdk.submit(form, values);
					document.getElementById('waitlist-form').classList.add('hidden');
					document.getElementById('waitlist-success').classList.remove('hidden');
				} catch(e) {
					btn.textContent = 'Request TestFlight Access';
					btn.disabled = false;
					err.textContent = 'Something went wrong — please try again.';
					err.classList.remove('hidden');
					console.error('Submit error:', e);
				}
			}
		</script>
		</body>
	</html>
}
